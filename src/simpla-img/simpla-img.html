<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../sm-ui-core/sm-ui-core.html">
<link rel="import" href="../sm-utility-placeholder/sm-utility-placeholder.html">
<link rel="import" href="../sm-utility-share/sm-utility-share.html">
<link rel="import" href="../sm-utility-connect/sm-utility-connect.html">
<link rel="import" href="../default-content/default-content.html">
<link rel="import" href="../simpla-block/simpla-block.html">

<link rel="import" href="./sm-img-canvas.html" />
<link rel="import" href="./sm-img-controls.html" />

<dom-module id="simpla-img">
  <template>
    <style include="sm-css"></style>
    <link rel="stylesheet" href="./simpla-img.css" inline>

    <sm-utility-placeholder id="placeholder" class="placeholder" show="[[usePlaceholder]]" on-tap="chooseFile"></sm-utility-placeholder>

    <div class="editor" id="editor">
      <sm-img-canvas
        id="image"
        src="[[src]]"
        width="[[width]]"
        height="[[height]]"
        scale="[[scale]]"
        editable="[[editable]]"
        active="[[active]]"
        on-pan-finished="updatePosition">
      </sm-img-canvas>

      <sm-img-controls
        id="controls"
        zoom="{{scale}}"
        title="{{title}}"
        active="[[active]]"
        on-file-changed="_fileChanged">
      </sm-img-controls>
    </div>

    <sm-utility-connect id="api"
      key="[[uid]]"
      saving="{{saving}}"
      loading="{{loading}}">
    </sm-utility-connect>

  </template>
  <script src="./simpla-img.js" inline></script>
</dom-module>
