<link rel="import" href="../sm-img-canvas/sm-img-canvas.html" />
<link rel="import" href="../sm-img-controls/sm-img-controls.html" />

<dom-module id="simpla-img">
  <template>
    <style include="sm-css"></style>
    <link rel="stylesheet" href="./simpla-img.css" />

    <sm-meta-placeholder id="placeholder" class="placeholder" show="[[usePlaceholder]]" on-tap="chooseFile"></sm-meta-placeholder>

  <div class="editor" id="editor">
    <sm-img-canvas
      id="image"
      src="[[src]]"
      width="[[width]]"
      height="[[height]]"
      scale="[[scale]]"
      editable="[[editable]]"
      active="[[active]]"
      on-pan-finished="updatePosition">
    </sm-img-canvas>

    <sm-img-controls
      id="controls"
      zoom="{{scale}}"
      title="{{title}}"
      active="[[active]]"
      on-file-changed="_fileChanged">
    </sm-img-controls>
  </div>

    <sm-connect-api id="api"
      key="[[uid]]"
      saving="{{saving}}"
      loading="{{loading}}">
    </sm-connect-api>

    <sm-helper-share
      type="state"
      key="editable"
      value="{{editable}}">
    </sm-helper-share>

  </template>
  <script src="./simpla-img.js"></script>
</dom-module>
