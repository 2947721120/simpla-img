<link rel="import" href="../polymer/polymer.html"> <link rel="import" href="../sm-ui-core/sm-ui-core.html"> <link rel="import" href="../sm-ui-button/sm-ui-button.html"> <dom-module id="sm-img-controls"> <template> <style include="sm-css-shady"></style> <style include="sm-css"></style> <style>:host{overflow:visible;@apply(--typography)}.toolbox{position:absolute;display:none;-webkit-box-align:center;-ms-flex-align:center;-ms-grid-row-align:center;align-items:center;background:var(--med-white);top:-5px;padding-top:5px;-webkit-transform:translateY(-100%);transform:translateY(-100%);opacity:.5}.toolbox[visible]{display:-webkit-box;display:-ms-flexbox;display:flex}:host([position=right]) .toolbox{right:0;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;border-radius:0 0 0 var(--border-radius)}:host([position=left]) .toolbox{left:0;-webkit-box-orient:horizontal;-webkit-box-direction:reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;border-radius:0 0 var(--border-radius) 0}.toolbox__tool{color:var(--med-black);width:var(--tool-size);-ms-flex-negative:0;flex-shrink:0}.toolbox__tool[active]{color:var(--blue)}.toolbox__tool:hover{color:var(--blue)}.toolbox__file{display:none}.toolbox__title{width:0;color:var(--text-color);-webkit-transition:width 140ms cubic-bezier(.215,.61,.355,1);transition:width 140ms cubic-bezier(.215,.61,.355,1)}.toolbox__title::-webkit-input-placeholder{opacity:0;color:var(--med-black);-webkit-transition:opacity 10ms;transition:opacity 10ms}.toolbox__title::-moz-placeholder{opacity:0;color:var(--med-black);-webkit-transition:opacity 10ms;transition:opacity 10ms}.toolbox__title:-ms-input-placeholder{opacity:0;color:var(--med-black);-webkit-transition:opacity 10ms;transition:opacity 10ms}.toolbox__title::placeholder{opacity:0;color:var(--med-black);-webkit-transition:opacity 10ms;transition:opacity 10ms}.toolbox__title--expanded::-webkit-input-placeholder{opacity:1;color:var(--med-black);-webkit-transition:opacity 80ms;transition:opacity 80ms}.toolbox__title--expanded::-moz-placeholder{opacity:1;color:var(--med-black);-webkit-transition:opacity 80ms;transition:opacity 80ms}.toolbox__title--expanded:-ms-input-placeholder{opacity:1;color:var(--med-black);-webkit-transition:opacity 80ms;transition:opacity 80ms}.toolbox__title--expanded::placeholder{opacity:1;color:var(--med-black);-webkit-transition:opacity 80ms;transition:opacity 80ms}.toolbox__title--expanded{width:220px}:host([position=right]) .toolbox__title--expanded{padding-left:14px}:host([position=left]) .toolbox__title--expanded{padding-right:14px}.zoom{position:absolute;display:none;left:5%;right:5%;border-top-left-radius:var(--border-radius);border-top-right-radius:var(--border-radius);background:var(--med-white);cursor:default;bottom:-5px;padding-bottom:5px;-webkit-transform:translateY(100%);transform:translateY(100%);opacity:.5}.zoom[visible]{display:block}.zoom__slider{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:var(--tool-size);width:90%;margin:0 auto;overflow:hidden}.zoom__slider__input{width:100%}.zoom__slider__input::-webkit-slider-runnable-track{-webkit-appearance:none;display:-webkit-box;display:flex;-webkit-box-align:center;align-items:center;background:var(--med-black);width:100%;height:4px;box-shadow:0;cursor:pointer;border-radius:999px;z-index:1}.zoom__slider__input::-moz-range-track{-moz-appearance:none;display:flex;align-items:center;background:var(--med-black);width:100%;height:4px;box-shadow:0;cursor:pointer;border-radius:999px;z-index:1}.zoom__slider__input::-ms-track{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;background:var(--med-black);width:100%;height:4px;box-shadow:0;cursor:pointer;border-radius:999px;z-index:1}input[type=range]{-webkit-appearance:none}input[type=range]::-moz-focus-outer{border:0}.zoom__slider__input::-ms-track{color:transparent;border:8px solid transparent;background:0 0}.zoom__slider__input::-ms-fill-upper{background:var(--med-black);border-radius:999px}.zoom__slider__input::-ms-tooltip{display:none}.zoom__slider__input::-webkit-slider-runnable-track:focus{-webkit-appearance:none;outline:0}.zoom__slider__input::-moz-range-track:focus{-moz-appearance:none;outline:0}.zoom__slider__input::-ms-track:focus{outline:0}input[type=range]{-webkit-appearance:none}input[type=range]::-moz-focus-outer{border:0}.zoom__slider__input::-webkit-slider-thumb{-webkit-appearance:none;box-sizing:border-box;border-radius:999px;background:var(--blue);box-shadow:none;border:3px solid #fff;width:18px;height:18px;position:relative;z-index:1}.zoom__slider__input::-moz-range-thumb{-moz-appearance:none;box-sizing:border-box;border-radius:999px;background:var(--blue);box-shadow:none;border:3px solid #fff;width:18px;height:18px;position:relative;z-index:1}.zoom__slider__input::-ms-thumb{box-sizing:border-box;border-radius:999px;background:var(--blue);box-shadow:none;border:3px solid #fff;width:18px;height:18px;position:relative;z-index:1}input[type=range]{-webkit-appearance:none}input[type=range]::-moz-focus-outer{border:0}.zoom__slider__input::-webkit-slider-thumb::before{-webkit-appearance:none;content:'';display:block;height:4px;width:10000px;position:absolute;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);right:15px;background:var(--blue);pointer-events:none;z-index:-1}.zoom__slider__input::-moz-range-thumb::before{-moz-appearance:none;content:'';display:block;height:4px;width:10000px;position:absolute;top:50%;transform:translateY(-50%);right:15px;background:var(--blue);pointer-events:none;z-index:-1}.zoom__slider__input::-ms-thumb::before{content:'';display:block;height:4px;width:10000px;position:absolute;top:50%;transform:translateY(-50%);right:15px;background:var(--blue);pointer-events:none;z-index:-1}input[type=range]{-webkit-appearance:none}input[type=range]::-moz-focus-outer{border:0}.zoom__slider__input::-moz-range-progress{background:var(--blue);box-shadow:1.5px .5px var(--blue),1.5px -.5px var(--blue)}.zoom__slider__input::-ms-fill-lower{background:var(--blue)}:host(.img--dark) .toolbox,:host(.img--dark) .zoom{background:var(--med-black);color:var(--bright-white)}:host(.img--dark) .toolbax__title,:host(.img--dark) .toolbox__tool:hover{color:#fff}:host(.img--dark) .zoom__slider__input::-webkit-slider-runnable-track{-webkit-appearance:none;background:var(--med-black)}:host(.img--dark) .zoom__slider__input::-moz-range-track{-moz-appearance:none;background:var(--med-black)}:host(.img--dark) .zoom__slider__input::-ms-track{background:var(--med-black)}input[type=range]{-webkit-appearance:none}input[type=range]::-moz-focus-outer{border:0}</style> <div class="toolbox" id="controls-top"> <input type="text" id="title" class="toolbox__title" placeholder="Enter image title" value="{{title::input}}"> <button is="sm-ui-button" id="titleButton" class="toolbox__tool" on-click="toggleTitle" icon="simpla:title"></button> <button is="sm-ui-button" class="toolbox__tool" icon="simpla:camera" on-tap="openFilePicker"> </button><input id="file" class="toolbox__file" type="file" on-change="_filesChanged"> </div> <div class="zoom" id="controls-bottom"> <div class="zoom__slider"> <input id="zoom" type="range" class="zoom__slider__input" min="1" value="{{zoom::input}}" on-change="_updateZoom" max="2" step="0.01"> </div> </div> </template> <script>!function(){"use strict";var t=simpla._constants.easings,e={open:{easing:t.easeOutBack,fill:"both",duration:180,delay:15},close:{easing:t.easeOutCubic,fill:"both",duration:125}},o={observers:["_toggleControls(active)"],_toggleControls:function(t){t?(this._setPosition(),this._openControls()):this._closeControls()},get _controlAnimations(){var t=this.$["controls-top"],e=this.$["controls-bottom"];return[{target:t,begin:{transform:"translateY(-100%)",opacity:.5},end:{transform:"translateY(0)",opacity:1}},{target:e,begin:{transform:"translateY(100%)",opacity:.5},end:{transform:"translateY(0)",opacity:1}}]},_openControls:function(){var t=this;this._controlAnimations.forEach(function(o){var i=o.target,n=o.begin,r=o.end;t.toggleAttribute("visible",!0,i),i.animate([n,r],e.open)})},_closeControls:function(){var t=this;this._controlAnimations.forEach(function(o){var i=o.target,n=o.begin,r=o.end,a=i.animate([r,n],e.close);a.onfinish=function(){t.toggleAttribute("visible",!1,i)}})}},i=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},n=function(){function t(t,e){for(var o=0;o<e.length;o++){var i=e[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,o,i){return o&&t(e.prototype,o),i&&t(e,i),e}}(),r="toolbox__title--expanded",a=function(){function t(){i(this,t)}return n(t,[{key:"beforeRegister",value:function(){this.is="sm-img-controls",this.properties={position:{type:String,reflectToAttribute:!0,value:"right"},title:{type:String,notify:!0},file:{type:Object,readonly:!0,notify:!0},zoom:{type:Number,notify:!0},active:{type:Boolean,notify:!0,value:!1}}}},{key:"toggleTitle",value:function(){var t=this.$.title,e=this.$.titleButton,o=!!t.className.match("\\b"+r+"\\b");e.active=!o,this.toggleClass(r,!o,t)}},{key:"openFilePicker",value:function(t){t&&t.stopPropagation(),this.$.file.click()}},{key:"_setPosition",value:function(){var t=void 0,e=void 0,o=void 0;t={x:window.outerWidth/2,y:window.outerHeight/2},e=this.getBoundingClientRect(),o={x:e.left+e.width/2,y:e.top+e.height/2},this.position=o.x<t.x?"right":"left"}},{key:"_filesChanged",value:function(t){var e=t.target.files;e&&e[0]&&(this.file=e[0])}},{key:"_updateZoom",value:function(){this.zoom=this.$.zoom.value}},{key:"behaviors",get:function(){return[o]}}]),t}();Polymer(a)}()</script> </dom-module>